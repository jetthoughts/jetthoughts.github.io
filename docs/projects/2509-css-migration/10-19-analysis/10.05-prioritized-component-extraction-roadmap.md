# Prioritized Component Extraction Roadmap
**Analyst Agent Report**
**Date**: 2025-10-06
**Status**: Phase 1B Complete - Phase 2 Ready
**Context**: CSS Migration Project (2509-css-migration)

---

## üéØ Executive Summary

This roadmap provides a comprehensive, data-driven priority matrix for component extraction based on:
- CSS duplication severity analysis (70-80% overlap in critical files)
- Component complexity assessment (solo vs pair vs team work classification)
- Current codebase metrics (430 FL-node HTML refs, 8,148 FL-node CSS rules, 1,775 BEM selectors)
- Testing strategy alignment with handbook TDD requirements

**Key Finding**: The CSS Migration Project has completed infrastructure consolidation (Phase 1B) with **78 source files consolidated into 3 master files**, achieving **71% source file reduction**. Phase 2 requires transitioning from infrastructure work to systematic HTML+CSS migration with focus on high-duplication, low-complexity components suitable for autonomous execution.

---

## üìä Current State Analysis

### Codebase Metrics (As of 2025-10-06)
```yaml
html_templates:
  total_files: 124
  fl_node_references: 430 occurrences
  bem_component_usage: "c-content-block, c-services-hero, c-achievements-header (recent additions)"

css_architecture:
  total_css_files: 105 (30 source files post-consolidation)
  fl_node_css_rules: 8,148 rules requiring migration
  bem_component_selectors: 1,775 selectors implemented
  component_files: 19 BEM component files created

migration_progress:
  phase_1b_complete: "14 critical files consolidated via @import (100%)"
  consolidation_masters: 3 files (_consolidated-utilities.css, _consolidated-components.css, _consolidated-layouts.css)
  source_reduction: "105 ‚Üí 30 files (71% reduction)"
  duplication_elimination: "PostCSS automation active"

quality_metrics:
  test_status: "40 runs, 59 assertions, 0 failures"
  visual_regression: "0% (perfect track record across 6 sprints)"
  methodology_compliance: "100% TDD RED-GREEN-REFACTOR adherence"
```

### Component Implementation Status
```yaml
bem_components_created: 19
  - c-button.css (3.3K)
  - c-hero-sections.css (25K)
  - c-navigation.css (18K)
  - c-social-share.css (28K)
  - c-gravity-forms.css (15K)
  - c-pp-advanced-menu.css (14K)
  - c-pp-buttons.css (9.7K)
  - c-pp-content-grid.css (11K)
  - c-pp-widgets.css (12K)
  - c-pp-infobox.css (7.4K)
  - c-cta-blocks.css (1.6K)
  - c-infobox.css (5.3K)
  - c-testimonial-section.css
  - c-testimonials.css
  - c-modal.css (452B)
  - c-feature-card--row2.css (1.4K)
  - blocks/c-nav.css
  - blocks/c-content.css
  - blocks/c-card.css
  - blocks/c-hero.css

dual_class_implementation:
  active_files: 5 (alerts, content-block, css-utilities, c-hero, c-content)
  partial_files: ~14 (component files with incomplete dual-class coverage)
```

---

## üîç Duplication Analysis: Critical Findings

### Critical CSS Duplication Patterns (13 Files, 70-80% Overlap)

Based on analysis from `10.04-duplication-analysis.md` and CSS Migration Patterns documentation:

#### Pattern 1: Navigation Styles (100% duplication across files)
```yaml
pattern: "Navigation base styles"
duplication_rate: 95%
affected_files: 13 critical CSS files
estimated_lines: ~2,000 lines duplicated
consolidation_opportunity: c-navigation.css (18K already created)
status: "BEM component exists, needs HTML migration"
```

#### Pattern 2: Button Styles (100% duplication across files)
```yaml
pattern: "Button base, hover, and variant styles"
duplication_rate: 75%
affected_files: 13 critical CSS files
estimated_lines: ~1,500 lines duplicated
consolidation_opportunity: c-button.css (3.3K already created)
status: "BEM component exists, needs HTML migration"
```

#### Pattern 3: Typography/Text Styles (100% duplication)
```yaml
pattern: "Font loading, heading, text base styles"
duplication_rate: 90%
affected_files: 13 critical CSS files
estimated_lines: ~2,500 lines duplicated
consolidation_opportunity: "c-text component needed"
status: "No BEM component yet - HIGH PRIORITY"
```

#### Pattern 4: Grid/Layout Foundation (100% duplication)
```yaml
pattern: "FL-row, FL-col base rules"
duplication_rate: 95%
affected_files: 13 critical CSS files
estimated_lines: ~3,000 lines duplicated
consolidation_opportunity: "c-grid component needed"
status: "No BEM component yet - CRITICAL PRIORITY"
```

#### Pattern 5: Hero Section Styles (76% duplication)
```yaml
pattern: "Hero section backgrounds, layouts, content"
duplication_rate: 60%
affected_files: 10 critical CSS files (homepage, about, services, etc.)
estimated_lines: ~4,000 lines duplicated
consolidation_opportunity: c-hero-sections.css (25K already created)
status: "BEM component exists, needs HTML migration"
```

#### Pattern 6: Utility Patterns (margin-bottom, font-weight, text-align)
```yaml
pattern: "Common utility declarations"
duplication_rate: 80%
affected_files: Multiple component and layout files
estimated_instances: 30+ duplicate declarations
consolidation_opportunity: _consolidated-utilities.css (created in Phase 1B)
status: "‚úÖ COMPLETE via PostCSS automation"
```

---

## üéØ Top 20 High-Priority Components for Extraction

### Priority Matrix Methodology
Components ranked by:
1. **Duplication Severity**: Lines of duplicated CSS (higher = more impact)
2. **Complexity**: Implementation effort (lower = faster wins)
3. **HTML Coordination**: HTML+CSS coupling (lower = autonomous work)
4. **Test Coverage**: Existing test infrastructure (higher = safer)

### Tier 1: Critical Foundation Components (Solo Work - 4-6 weeks)

#### 1. **Grid/Layout System (c-grid)** ü•á
```yaml
priority: CRITICAL
duplication_severity: 95% (3,000+ lines duplicated)
complexity: MEDIUM
work_classification: PAIR (layout-critical, requires XP pair)
estimated_effort: 40-60 hours
html_coordination: HIGH (2,000+ .fl-row + 3,000+ .fl-col references)
test_strategy: Visual regression per page template
reasoning: "Foundation for all other components - blocking dependency"

deliverables:
  - c-grid.css (grid container, items, responsive variants)
  - c-section.css (semantic section wrappers replacing fl-row)
  - c-column.css (semantic column wrappers replacing fl-col)
  - HTML migration: Top 10 files (274 refs, 47.9% of total)
  - Tests: Grid layout screenshots, responsive breakpoints
```

#### 2. **Typography/Text System (c-text)** ü•à
```yaml
priority: CRITICAL
duplication_severity: 90% (2,500+ lines duplicated)
complexity: LOW
work_classification: SOLO (simple pattern-based work)
estimated_effort: 20-30 hours
html_coordination: MEDIUM (heading, paragraph, list tags)
test_strategy: Typography visual regression baseline
reasoning: "Content foundation - affects all pages, simple extraction"

deliverables:
  - c-text.css (headings h1-h6, paragraphs, lists, inline text)
  - c-heading.css (heading variants, sizes, weights)
  - c-paragraph.css (body text, lead text, captions)
  - HTML migration: Text-heavy pages (about, services, blog)
  - Tests: Typography rendering screenshots
```

#### 3. **Button System Completion (c-button)** ü•â
```yaml
priority: HIGH
duplication_severity: 75% (1,500+ lines duplicated)
complexity: LOW
work_classification: SOLO (component exists, needs HTML migration)
estimated_effort: 15-20 hours
html_coordination: LOW (button tags, anchor links)
test_strategy: Button interaction tests (already exists from Sprint 3)
reasoning: "Component exists, simple HTML class replacement"

deliverables:
  - Update existing c-button.css with missing variants
  - HTML migration: All button instances across site
  - Dual-class completion: .fl-button.c-button systematic application
  - Tests: Button hover, focus, active states (extend existing)
```

#### 4. **Navigation System Completion (c-navigation)**
```yaml
priority: HIGH
duplication_severity: 95% (2,000+ lines duplicated)
complexity: MEDIUM
work_classification: PAIR (interactive component, accessibility critical)
estimated_effort: 25-35 hours
html_coordination: MEDIUM (nav structure, menu items, submenus)
test_strategy: Navigation interaction tests, mobile menu
reasoning: "Component exists, needs systematic HTML migration"

deliverables:
  - Update c-navigation.css with mobile/desktop variants
  - HTML migration: Main nav, footer nav, mobile menu
  - Accessibility: ARIA labels, keyboard navigation
  - Tests: Navigation dropdown, mobile toggle, responsive
```

### Tier 2: High-Impact Content Components (Solo Work - 3-4 weeks)

#### 5. **Hero Section System Consolidation (c-hero-sections)**
```yaml
priority: HIGH
duplication_severity: 60% (4,000+ lines duplicated)
complexity: MEDIUM
work_classification: PAIR (above-fold critical, background images)
estimated_effort: 30-40 hours
html_coordination: MEDIUM (hero structure per page)
test_strategy: Hero visual regression per page type
reasoning: "25K component exists, needs page-by-page migration"

deliverables:
  - Consolidate c-hero-sections.css variants
  - HTML migration: Homepage, about, services, careers heroes
  - Background image optimization
  - Tests: Hero layouts, responsive images, CTA visibility
```

#### 6. **Card System (c-card)**
```yaml
priority: MEDIUM-HIGH
duplication_severity: 40% (estimated 1,500+ lines)
complexity: LOW
work_classification: SOLO (simple content presentation)
estimated_effort: 15-20 hours
html_coordination: LOW (card markup standardization)
test_strategy: Card variant screenshot tests
reasoning: "Simple component, high reuse across blog/portfolio/team"

deliverables:
  - c-card.css (base, header, body, footer, variants)
  - HTML migration: Blog cards, team cards, case study cards
  - Variants: .c-card--blog, .c-card--team, .c-card--case-study
  - Tests: Card layouts, hover effects, responsive grids
```

#### 7. **Form System Consolidation (c-form + c-gravity-forms)**
```yaml
priority: MEDIUM-HIGH
duplication_severity: 50% (estimated 2,000+ lines in Gravity Forms)
complexity: HIGH
work_classification: TEAM (form validation, Gravity Forms integration)
estimated_effort: 40-50 hours
html_coordination: HIGH (form markup, field types, validation)
test_strategy: Form interaction tests, validation states
reasoning: "15K component exists, complex integration with Gravity Forms"

deliverables:
  - Consolidate c-gravity-forms.css (15K)
  - Create c-form.css (generic form components)
  - HTML migration: Contact form, newsletter, career applications
  - Gravity Forms theme integration
  - Tests: Form submission, validation, error states
```

#### 8. **CTA Block System (c-cta-blocks)**
```yaml
priority: MEDIUM
duplication_severity: 30% (estimated 800+ lines)
complexity: LOW
work_classification: SOLO (simple call-to-action components)
estimated_effort: 10-15 hours
html_coordination: LOW (CTA markup standardization)
test_strategy: CTA visual regression tests
reasoning: "1.6K component exists, simple HTML migration"

deliverables:
  - Update c-cta-blocks.css with variants
  - HTML migration: CTA sections across homepage, service pages
  - Variants: .c-cta-block--primary, .c-cta-block--secondary
  - Tests: CTA layouts, button prominence
```

### Tier 3: Specialized Components (Pair/Team Work - 2-3 weeks)

#### 9. **Testimonial System (c-testimonial-section + c-testimonials)**
```yaml
priority: MEDIUM
duplication_severity: 25% (estimated 600+ lines)
complexity: MEDIUM
work_classification: PAIR (slider integration, quote styling)
estimated_effort: 20-25 hours
html_coordination: MEDIUM (testimonial structure, ratings, avatars)
test_strategy: Testimonial slider interaction tests
reasoning: "Components exist, needs slider integration validation"

deliverables:
  - Consolidate c-testimonial-section.css + c-testimonials.css
  - HTML migration: Homepage testimonials, about page reviews
  - Slider integration: Swiper/Slick compatibility
  - Tests: Slider navigation, autoplay, responsive
```

#### 10. **InfoBox/Feature System (c-infobox)**
```yaml
priority: MEDIUM
duplication_severity: 20% (estimated 500+ lines)
complexity: LOW
work_classification: SOLO (simple content blocks with icons)
estimated_effort: 12-18 hours
html_coordination: LOW (infobox markup standardization)
test_strategy: InfoBox variant screenshot tests
reasoning: "5.3K component exists, needs HTML migration"

deliverables:
  - Consolidate c-infobox.css (5.3K) + c-feature-card--row2.css (1.4K)
  - HTML migration: Service features, about page highlights
  - Icon integration: SVG icons with c-icon component
  - Tests: InfoBox layouts, icon alignment
```

#### 11. **Social Share System (c-social-share)**
```yaml
priority: MEDIUM
duplication_severity: 15% (estimated 400+ lines)
complexity: LOW
work_classification: SOLO (simple social buttons)
estimated_effort: 8-12 hours
html_coordination: LOW (social button markup)
test_strategy: Social share interaction tests
reasoning: "28K component exists (likely includes variants), needs HTML migration"

deliverables:
  - Consolidate c-social-share.css (28K - validate if over-sized)
  - HTML migration: Blog posts, case studies
  - Social platforms: Facebook, Twitter, LinkedIn, Email
  - Tests: Share button clicks, icon rendering
```

#### 12. **PowerPack Advanced Menu (c-pp-advanced-menu)**
```yaml
priority: MEDIUM
duplication_severity: 20% (estimated 500+ lines)
complexity: HIGH
work_classification: TEAM (PowerPack plugin integration)
estimated_effort: 30-40 hours
html_coordination: HIGH (PowerPack menu structure)
test_strategy: Menu interaction tests, dropdown navigation
reasoning: "14K component exists, complex PowerPack dependency"

deliverables:
  - Audit c-pp-advanced-menu.css (14K) for PowerPack coupling
  - HTML migration: Advanced menu instances
  - PowerPack compatibility: Ensure dual-class works with plugin
  - Tests: Dropdown menus, mobile menu, accessibility
```

### Tier 4: PowerPack Integration Components (Team Work - 3-4 weeks)

#### 13. **PowerPack Buttons (c-pp-buttons)**
```yaml
priority: MEDIUM-LOW
duplication_severity: 15% (estimated 400+ lines)
complexity: MEDIUM
work_classification: PAIR (PowerPack button variations)
estimated_effort: 15-20 hours
html_coordination: MEDIUM (PowerPack button shortcodes)
test_strategy: PowerPack button variant tests
reasoning: "9.7K component exists, PowerPack integration required"

deliverables:
  - Consolidate c-pp-buttons.css (9.7K)
  - HTML migration: PowerPack button instances
  - Merge with c-button.css strategy (avoid duplication)
  - Tests: PowerPack button styles, hover effects
```

#### 14. **PowerPack Content Grid (c-pp-content-grid)**
```yaml
priority: MEDIUM-LOW
duplication_severity: 18% (estimated 450+ lines)
complexity: MEDIUM
work_classification: PAIR (PowerPack grid layouts)
estimated_effort: 18-24 hours
html_coordination: MEDIUM (PowerPack grid shortcodes)
test_strategy: Content grid layout tests
reasoning: "11K component exists, PowerPack integration required"

deliverables:
  - Consolidate c-pp-content-grid.css (11K)
  - HTML migration: PowerPack content grid instances
  - Grid responsiveness: Mobile, tablet, desktop layouts
  - Tests: Grid layouts, item alignment, gaps
```

#### 15. **PowerPack Widgets (c-pp-widgets)**
```yaml
priority: MEDIUM-LOW
duplication_severity: 12% (estimated 350+ lines)
complexity: MEDIUM
work_classification: PAIR (PowerPack widget variations)
estimated_effort: 15-22 hours
html_coordination: MEDIUM (PowerPack widget shortcodes)
test_strategy: Widget rendering tests
reasoning: "12K component exists, PowerPack integration required"

deliverables:
  - Consolidate c-pp-widgets.css (12K)
  - HTML migration: PowerPack widget instances
  - Widget types: Social, contact, custom content
  - Tests: Widget layouts, responsive behavior
```

#### 16. **PowerPack InfoBox (c-pp-infobox)**
```yaml
priority: MEDIUM-LOW
duplication_severity: 10% (estimated 300+ lines)
complexity: LOW
work_classification: SOLO (PowerPack infobox component)
estimated_effort: 10-15 hours
html_coordination: LOW (PowerPack infobox shortcode)
test_strategy: InfoBox variant tests
reasoning: "7.4K component exists, merge with c-infobox.css"

deliverables:
  - Merge c-pp-infobox.css (7.4K) with c-infobox.css (5.3K)
  - HTML migration: PowerPack infobox instances
  - Consolidate InfoBox system (PowerPack + custom)
  - Tests: InfoBox variants, icon integration
```

### Tier 5: Specialized/Edge Components (Solo/Pair Work - 1-2 weeks)

#### 17. **Modal System (c-modal)**
```yaml
priority: LOW
duplication_severity: 5% (estimated 100+ lines)
complexity: MEDIUM
work_classification: PAIR (JavaScript interaction, accessibility)
estimated_effort: 12-18 hours
html_coordination: LOW (modal markup standardization)
test_strategy: Modal interaction tests, keyboard navigation
reasoning: "452B component exists (very small, likely incomplete)"

deliverables:
  - Expand c-modal.css (452B currently)
  - HTML migration: Modal instances (if any)
  - Modal JavaScript: Open, close, backdrop, keyboard ESC
  - Tests: Modal open/close, focus trap, accessibility
```

#### 18. **Alert/Notification System (alerts.css)**
```yaml
priority: LOW
duplication_severity: 3% (estimated 80+ lines)
complexity: LOW
work_classification: SOLO (simple alert components)
estimated_effort: 6-10 hours
html_coordination: LOW (alert markup standardization)
test_strategy: Alert variant screenshot tests
reasoning: "1.6K component exists, likely complete"

deliverables:
  - Validate alerts.css (1.6K) completeness
  - HTML migration: Alert instances across site
  - Alert types: Success, error, warning, info
  - Tests: Alert styling, icon placement
```

#### 19. **Feature Card Row2 (c-feature-card--row2)**
```yaml
priority: LOW
duplication_severity: 2% (estimated 50+ lines)
complexity: LOW
work_classification: SOLO (specific feature card variant)
estimated_effort: 4-8 hours
html_coordination: LOW (feature card markup)
test_strategy: Feature card layout tests
reasoning: "1.4K component exists, specific use case"

deliverables:
  - Validate c-feature-card--row2.css (1.4K)
  - HTML migration: Feature card instances (row 2 specific)
  - Merge with c-card.css as variant (consolidation opportunity)
  - Tests: Feature card layouts, row 2 specific styling
```

#### 20. **Consolidated Components Master (Phase 1B Completion)**
```yaml
priority: INFRASTRUCTURE
duplication_severity: 0% (consolidation master file)
complexity: N/A
work_classification: COMPLETE
estimated_effort: 0 hours (already complete)
html_coordination: N/A
test_strategy: Build validation only
reasoning: "Phase 1B complete - 78 files consolidated into 3 masters"

status: ‚úÖ COMPLETE
  - _consolidated-utilities.css (1.6K)
  - _consolidated-components.css (1.6K)
  - _consolidated-layouts.css (created in Phase 1B)
  - PostCSS duplication elimination: Active
  - Source file reduction: 105 ‚Üí 30 files (71%)
```

---

## üèóÔ∏è Work Classification & Execution Strategy

### Solo Execution (Autonomous Work - 40% of components)
**Suitable Components**: Simple, repetitive patterns with low HTML coordination
- c-text (typography system)
- c-button (HTML class replacement)
- c-card (content presentation)
- c-cta-blocks (simple call-to-action)
- c-infobox (feature blocks)
- c-social-share (social buttons)
- c-pp-infobox (PowerPack infobox)
- alerts.css (notification system)
- c-feature-card--row2 (specific feature variant)

**Execution Pattern**:
```yaml
approach: Autonomous batch processing
validation: bin/rake test:critical after each file
commit_strategy: Micro-commits on green tests (‚â§3 lines per commit)
approval_gates: NONE (continuous work to completion)
stop_conditions: Critical test failures ONLY
```

**Estimated Timeline**: 4-6 weeks (solo execution, 100-150 hours)

### Pair Execution (2 agents - 40% of components)
**Suitable Components**: Moderate complexity, HTML+CSS coordination required
- c-grid (layout-critical, requires careful validation)
- c-navigation (interactive, accessibility critical)
- c-hero-sections (above-fold critical, backgrounds)
- c-testimonial-section (slider integration)
- c-pp-buttons (PowerPack integration)
- c-pp-content-grid (PowerPack grid layouts)
- c-pp-widgets (PowerPack widget variations)
- c-modal (JavaScript interaction)

**Execution Pattern**:
```yaml
approach: Driver + Navigator, 25min rotation
validation: Visual regression + interaction tests
commit_strategy: Paired commits after validation
approval_gates: MINIMAL (pair approval only)
stop_conditions: Visual regression OR test failures
```

**Estimated Timeline**: 3-4 weeks (pair execution, 80-120 hours)

### Team Execution (Full XP team - 20% of components)
**Suitable Components**: Complex architecture, multi-file changes, integration critical
- c-form + c-gravity-forms (form validation, Gravity Forms integration)
- c-pp-advanced-menu (PowerPack menu integration, complex navigation)

**Execution Pattern**:
```yaml
approach: Full XP team with TDD specialists
validation: Comprehensive testing (unit, integration, visual)
commit_strategy: Sprint-based with retrospectives
approval_gates: STANDARD (XP team + Product Owner)
stop_conditions: ANY quality gate failure
```

**Estimated Timeline**: 3-4 weeks (team execution, 70-90 hours)

---

## üìã Testing Strategy Matrix

### Visual Regression Testing (All Components)
```yaml
tool: Capybara + assert_stable_screenshot
seed: 60316 (proven in Sprints 1-6)
tolerance: 0.03 (3% visual difference allowed)
frequency: After EVERY file change
baseline: Capture before starting component work
```

### Interaction Testing (Interactive Components)
```yaml
components_requiring_interaction_tests:
  - c-navigation (dropdown, mobile menu)
  - c-button (hover, focus, active states)
  - c-form (field validation, submission)
  - c-modal (open, close, keyboard navigation)
  - c-testimonial-section (slider controls)
  - c-pp-advanced-menu (menu interactions)

test_approach: Capybara system tests
assertions_per_component: 5-10 behavioral assertions
test_runner: bin/rake test or bin/rake test:critical
```

### Performance Testing (Critical Path Components)
```yaml
components_requiring_performance_tests:
  - c-grid (layout performance)
  - c-hero-sections (above-fold render)
  - c-navigation (FOUC prevention <100ms)
  - Critical CSS consolidation (overall bundle size)

metrics_tracked:
  - First Contentful Paint (FCP)
  - Largest Contentful Paint (LCP)
  - Cumulative Layout Shift (CLS)
  - CSS bundle size (target: <800KB from 2.4MB)
```

---

## üéØ Recommended Execution Order

### Phase 2A: Foundation Components (Weeks 1-4)
**Goal**: Establish layout and typography foundation
```yaml
week_1_2:
  - c-grid (PAIR, 40-60h) - BLOCKING for other components
  - c-text (SOLO, 20-30h) - Content foundation

week_3_4:
  - c-button (SOLO, 15-20h) - High-frequency component
  - c-navigation (PAIR, 25-35h) - Site-wide navigation
```

### Phase 2B: Content Components (Weeks 5-7)
**Goal**: Content presentation and user engagement
```yaml
week_5:
  - c-hero-sections (PAIR, 30-40h) - Above-fold critical
  - c-card (SOLO, 15-20h) - Content blocks

week_6_7:
  - c-cta-blocks (SOLO, 10-15h) - Call-to-action
  - c-testimonial-section (PAIR, 20-25h) - Social proof
  - c-infobox (SOLO, 12-18h) - Feature highlights
```

### Phase 2C: Forms & Integration (Weeks 8-10)
**Goal**: User interaction and PowerPack integration
```yaml
week_8_9:
  - c-form + c-gravity-forms (TEAM, 40-50h) - Complex integration

week_10:
  - c-pp-advanced-menu (TEAM, 30-40h) - PowerPack navigation
  - c-social-share (SOLO, 8-12h) - Social engagement
```

### Phase 2D: PowerPack Cleanup (Weeks 11-12)
**Goal**: PowerPack component consolidation
```yaml
week_11:
  - c-pp-buttons (PAIR, 15-20h) - PowerPack button variations
  - c-pp-content-grid (PAIR, 18-24h) - PowerPack grid layouts

week_12:
  - c-pp-widgets (PAIR, 15-22h) - PowerPack widgets
  - c-pp-infobox (SOLO, 10-15h) - Merge with c-infobox
```

### Phase 2E: Specialized Components (Weeks 13-14)
**Goal**: Edge cases and specialized functionality
```yaml
week_13_14:
  - c-modal (PAIR, 12-18h) - Modal interactions
  - alerts.css (SOLO, 6-10h) - Alert system
  - c-feature-card--row2 (SOLO, 4-8h) - Feature card variants
```

---

## üìä Success Metrics & Quality Gates

### Component Extraction Success Criteria
```yaml
per_component_gates:
  - CSS duplication eliminated: Target >70% reduction
  - HTML migration complete: 100% FL-node references replaced
  - Tests passing: 100% (0 failures tolerance)
  - Visual regression: 0% (‚â§3% tolerance allowed)
  - Performance maintained: No degradation in Core Web Vitals
  - Accessibility: WCAG 2.1 AA compliance maintained

program_level_gates:
  - Total FL-node HTML references: 430 ‚Üí 0 (100% elimination)
  - Total FL-node CSS rules: 8,148 ‚Üí 0 (100% elimination)
  - CSS bundle size: 2.4MB ‚Üí <800KB (67% reduction target)
  - Source files: 105 ‚Üí 30 (71% reduction achieved in Phase 1B)
  - Component library: 19 ‚Üí 25+ (comprehensive BEM coverage)
```

### Quality Validation Checklist
```yaml
before_component_work:
  - [ ] Visual baseline screenshots captured (seed 60316)
  - [ ] Performance baseline recorded (FCP, LCP, CLS)
  - [ ] Current test suite passing (bin/rake test:critical)
  - [ ] Git working tree clean (ready for micro-commits)

during_component_work:
  - [ ] Micro-commits after each change (‚â§3 lines)
  - [ ] Tests run after every commit (bin/rake test:critical)
  - [ ] Visual regression check after HTML changes
  - [ ] Rollback on ANY test failure (git reset --hard HEAD~1)

after_component_completion:
  - [ ] All HTML FL-node references replaced with BEM classes
  - [ ] All CSS FL-node rules migrated to BEM selectors
  - [ ] Visual regression tests passing (0% difference)
  - [ ] Performance metrics maintained or improved
  - [ ] Accessibility validation passing (WCAG 2.1 AA)
  - [ ] Component documentation updated
  - [ ] Retrospective notes captured for team learning
```

---

## üöÄ Immediate Next Actions

### For Analyst Agent (This Report)
- [x] Analyze CSS duplication patterns across 13 critical files
- [x] Create duplication metrics for 20+ component candidates
- [x] Assess component complexity for work classification
- [x] Generate prioritized component extraction roadmap
- [ ] Share analysis findings via memory coordination (claude-flow MCP)
- [ ] Coordinate with development agents for Phase 2 kickoff

### For Development Team (Phase 2 Ready)
1. **Decision Point**: Review and approve Phase 2A Foundation Components (c-grid + c-text)
2. **Team Formation**: Assign c-grid to PAIR team, c-text to SOLO agent
3. **Baseline Capture**: Screenshot all pages with seed 60316 before starting
4. **Memory Coordination**: Store component extraction priorities in memory namespace
5. **Sprint Planning**: Create Sprint 7 plan for Foundation Components (Week 1-2)

### For Product Owner
1. **Review Roadmap**: Approve prioritized component extraction order
2. **Resource Allocation**: Confirm 12-14 week timeline for Phase 2 completion
3. **Quality Gates**: Approve success criteria and validation checklist
4. **Approve Sprint 7**: Foundation Components (c-grid PAIR + c-text SOLO)

---

## üìö References & Context

### Project Documentation
- **CSS Migration Project Summary**: `/docs/projects/2509-css-migration/PROJECT-SUMMARY.md`
- **Goal & Progress Tracking**: `/docs/projects/2509-css-migration/GOAL-AND-PROGRESS.md`
- **Remaining Work Breakdown**: `/docs/projects/2509-css-migration/REMAINING-WORK-TO-FINAL-GOAL.md`
- **Duplication Analysis**: `/docs/projects/2509-css-migration/10-19-analysis/10.04-duplication-analysis.md`
- **Component Inventory**: `/docs/projects/2509-css-migration/20-29-components/20.01-component-inventory.md`

### Global Handbook References
- **TDD Methodology**: `/knowledge/20.01-tdd-methodology-reference.md`
- **TDD Agent Delegation**: `/knowledge/20.11-tdd-agent-delegation-how-to.md`
- **Shameless Green & Flocking Rules**: `/knowledge/20.05-shameless-green-flocking-rules-methodology.md`
- **Test Smell Prevention**: `/knowledge/25.04-test-smell-prevention-enforcement-protocols.md`
- **Four-Eyes Principle**: `/knowledge/20.02-four-eyes-principle-global.md`
- **Reflection Protocol**: `/knowledge/02.08-mandatory-reflection-protocol-supreme-reference.md`

### Migration Patterns Documentation
- **CSS Migration Patterns**: `/docs/30-39-architecture/39-css-migration-patterns-and-guidelines.md`
- **CSS Migration Roadmap**: `/docs/30-39-architecture/36-css-migration-roadmap.md`
- **Legacy CSS Cleanup Strategy**: `/docs/30-39-architecture/37-legacy-css-cleanup-strategy.md`

---

**Report Status**: ‚úÖ COMPLETE - Ready for Development Team Review
**Next Action**: Development team to approve Phase 2A Foundation Components and begin Sprint 7 planning
**Memory Coordination**: Store analysis findings in `css-migration/phase-2/component-priorities` namespace

---

*Analyst Agent - CSS Migration Project (2509-css-migration)*
*Generated: 2025-10-06*
*Context: Phase 1B Complete (71% source file reduction) - Phase 2 Foundation Components Ready*
