/**
 * Grid Component (c-grid)
 *
 * Unified grid system consolidating FL-Builder and PowerPack patterns
 * Provides flexible, responsive grid layout with BEM methodology
 *
 * CYCLE 4: Grid System Enhancement
 * Target: 40-50% reduction of 4,126+ grid references
 */

/* ==========================================================================
   Grid Container
   ========================================================================== */

.c-grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: var(--spacing-md, 1rem);
  width: 100%;

  // Dual-class support for FL-Builder compatibility
  &.fl-row,
  &.fl-row-content {
    margin-left: auto;
    margin-right: auto;
    min-width: 0;
  }
}

/* Grid Layouts
   ========================================================================== */

.c-grid--auto {
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
}

.c-grid--equal {
  grid-template-columns: repeat(auto-fit, 1fr);
}

.c-grid--2-col {
  grid-template-columns: repeat(2, 1fr);
}

.c-grid--3-col {
  grid-template-columns: repeat(3, 1fr);
}

.c-grid--4-col {
  grid-template-columns: repeat(4, 1fr);
}

/* Grid Items
   ========================================================================== */

.c-grid__item {
  grid-column: span 1;
  min-width: 0; // Prevent overflow

  // Dual-class support for FL-Builder
  &.fl-col,
  &.fl-col-content {
    display: block;
    max-width: 100%;
    width: 100%;
  }
}

/* Item Spans
   ========================================================================== */

.c-grid__item--span-2 { grid-column: span 2; }
.c-grid__item--span-3 { grid-column: span 3; }
.c-grid__item--span-4 { grid-column: span 4; }
.c-grid__item--span-6 { grid-column: span 6; }
.c-grid__item--span-8 { grid-column: span 8; }
.c-grid__item--span-12 { grid-column: span 12; }

/* PowerPack Content Grid Support
   ========================================================================== */

.c-grid--content {
  // Dual-class for PowerPack compatibility
  &.pp-content-post-grid,
  &.pp-content-grid {
    display: grid;

    .c-grid__item {
      &.pp-content-post,
      &.pp-content-grid-post {
        transition: transform 0.2s ease;

        &:hover {
          transform: translateY(-2px);
        }
      }
    }
  }
}

/* Responsive Grid Behavior
   ========================================================================== */

// Tablet breakpoint
@media (max-width: 768px) {
  .c-grid--4-col,
  .c-grid--3-col {
    grid-template-columns: repeat(2, 1fr);
  }

  .c-grid__item--span-8,
  .c-grid__item--span-6 {
    grid-column: span 6;
  }

  .c-grid__item--span-4,
  .c-grid__item--span-3 {
    grid-column: span 3;
  }
}

// Mobile breakpoint
@media (max-width: 480px) {
  .c-grid,
  .c-grid--2-col,
  .c-grid--3-col,
  .c-grid--4-col {
    grid-template-columns: 1fr;
    gap: var(--spacing-sm, 0.75rem);
  }

  .c-grid__item,
  .c-grid__item--span-2,
  .c-grid__item--span-3,
  .c-grid__item--span-4,
  .c-grid__item--span-6,
  .c-grid__item--span-8 {
    grid-column: span 1;
  }
}

/* Spacing Variants
   ========================================================================== */

.c-grid--tight {
  gap: var(--spacing-xs, 0.5rem);
}

.c-grid--loose {
  gap: var(--spacing-lg, 1.5rem);
}

.c-grid--no-gap {
  gap: 0;
}

/* Equal Height Support
   ========================================================================== */

.c-grid--equal-height {
  .c-grid__item {
    display: flex;
    flex-direction: column;

    // Dual-class FL-Builder support
    &.fl-col {
      display: flex;
    }
  }
}

/* Clearfix Legacy Support (Minimal)
   ========================================================================== */

.c-grid {
  // Only include if needed for FL-Builder compatibility
  &::after {
    content: "";
    display: table;
    clear: both;
  }
}

/* Module Content Support
   ========================================================================== */

.c-grid__module {
  // Dual-class for FL-Builder modules
  &.fl-module,
  &.fl-module-content {
    width: 100%;

    &::after {
      content: "";
      display: table;
      clear: both;
    }
  }
}