/******* Do not edit this file *******
Simple Custom CSS and JS - by Silkypress.com
Saved: Aug 28 2023 | 08:18:55 */
(function ($) {
    if (!window.SDB) {
        SDB = {};
    }
    /*
     * Application Init, everything starts here
     *
     */
    SDB.App = function() {
        return {
            exists: function(x) {
                if ($(x).length > 0) { return true; }
            },
            init: function() {
				if(SDB.App.exists('.menu.pp-advanced-menu-horizontal')){
				   $('.sub-menu > .menu-item').each(function(){
					  $(this).find('a').prepend('<div class="menu-image"></div>');
					  $(this).find('a').append('<p class="menu-desc"></p>');
				   });
				};
				// Basic Clickable for .hover-box class
				if(SDB.App.exists('.hover-box')){
					$(document).on('click', 'body:not(.fl-builder-edit) .hover-box .fl-col-content', function(event) { 
                        window.location = $(this).find("a").attr("href"); 
                      	return false;
                    });
				}
				// Basic Clickable for post content
				if(SDB.App.exists('.jt-clickable')){
					$(document).on('click', 'body:not(.fl-builder-edit) .jt-clickable .pp-content-post', function(event) { 
                        window.location = $(this).find("a").attr("href"); 
                      	return false;
                    });
				}
				// Clone Social Icons to Mobile Menu, Add link to menu logo
				if(SDB.App.exists('nav.pp-menu-nav.pp-off-canvas-menu.pp-menu-right')){
					$(".jt-footer-social .pp-social-icons").clone().appendTo("nav.pp-menu-nav.pp-off-canvas-menu.pp-menu-right");
				}     
				// Move search form to Blog Archive 
				if(SDB.App.exists('.blog-archive-search')){
					var elem = $('.blog-search .pp-search-form-wrap').detach();
					$('.blog-archive-search .pp-post-filters-wrapper').append(elem);
					$('.pp-post-filters').wrapAll('<div class="filter-wrap"></div>');
				}
				// Modify Search Text				
				if(SDB.App.exists('.search-results')){
					$(".search-results h1.fl-heading .fl-heading-text").text($(".search-results h1.fl-heading .fl-heading-text").text().replace("Search Results: ", ""));
					$(".search-results h1.fl-heading .fl-heading-text").text($(".search-results h1.fl-heading .fl-heading-text").text().replace("Showing ", ""));
				}
				// UK TOC
				if(SDB.App.exists('.uk-toc')){
					$('.pp-toc-list-wrapper > li').each(function(){
						var txt= $(this).find('a').text();
						if(txt.length > 35){
							$(this).find('a').html(txt.substring(0,30) + '...');
						}
					});
				} 
				// Remove Career Form Title after Submission
				if(SDB.App.exists('.career-form')){
					$(document).on('gform_confirmation_loaded', function(){
						$('.career-form .form-title').hide();
					});
				} 		
				// Add Active Class to Clients, Careers & Blog
				if(SDB.App.exists('body.single')){
					if($('body').hasClass('single-post')){
						$('ul.menu').find('.jt-blog').addClass('jt-active');
					}else if($('body').hasClass('single-jt_case_studies')){
						$('ul.menu').find('.jt-clients').addClass('jt-active');
					}else if($('body').hasClass('single-jt-careers')){
						$('ul.menu').find('.jt-careers').addClass('jt-active');
					}else{
						return false;
					}
				}
				// Number Counter
				if(SDB.App.exists('.jt-counter-number-ready')){
					$(document).ready(startCounterReady);
					flag = 1

					function startCounterReady() {
						if ($('.jt-counter-number-ready').length > 0) {
							$('.jt-counter-number-ready').each(function () {
								var _current = $(this);
								var countDuration = 0;
								var toTop = _current.offset().top - window.innerHeight;

								if (countDuration == 0 && $(window).scrollTop() > toTop && _current.find('.counter-value').hasClass('active')) {
									_current.find('.counter-value').each(function () {
										var $this = $(this),
											countTo = $this.attr('data-count');
											countNum: $this.text();
										$({
										}).animate({
											countNum: countTo
										}, {
											duration: 1500,
											easing: 'swing',
											step: function (now) {
												$this.text(Math.ceil(now).toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,"));
											},
											complete: function () {
												$this.stop();
											}
										});

										$this.removeClass('active');
									});
									countDuration = 1;
								}
							});
						}
					}
				}
				if(SDB.App.exists('.jt-counter-number')){
					$(window).scroll(startCounter);
					flag = 1

					function startCounter() {
						if ($('.jt-counter-number').length > 0) {
							$('.jt-counter-number').each(function () {
								var _current = $(this);
								var countDuration = 0;
								var toTop = _current.offset().top - window.innerHeight;
								if (countDuration == 0 && $(window).scrollTop() > toTop && _current.find('.counter-value').hasClass('active')) {
									_current.find('.counter-value').each(function () {
										var $this = $(this),
											countTo = $this.attr('data-count');
											countNum: $this.text();
										$({
										}).animate({
											countNum: countTo
										}, {
											duration: 2000,
											easing: 'swing',
											step: function (now) {
												$this.text(Math.ceil(now).toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,"));
											},
											complete: function () {
												$this.stop();
											}
										});

										$this.removeClass('active');
									});
									countDuration = 1;
								}
							});
						}
					}
				}		
				// Sidebar Active
				if(SDB.App.exists('.uk-toc')){
					// Cache selectors
					var lastId,
						topMenu = $(".uk-toc"),
						topMenuHeight = $("header.fl-builder-content").outerHeight(),//topMenu.outerHeight()-250,
						// All list items
						menuItems = topMenu.find("a"),
						// Anchors corresponding to menu items
						scrollItems = menuItems.map(function(){
						  var item = $($(this).attr("href"));
						  if (item.length) { return item; }
						});

					// Bind click handler to menu items
					// so we can get a fancy scroll animation
					menuItems.click(function(e){
					  var href = $(this).attr("href"),
						  offsetTop = href === "#" ? 0 : $(href).offset().top-topMenuHeight+1;
					  $('html, body').stop().animate({ 
						  scrollTop: offsetTop
					  }, 800);
					  e.preventDefault();
					});

					// Bind to scroll
					$(window).scroll(function(){
					   // Get container scroll position
					   var fromTop = $(this).scrollTop()+topMenuHeight;

						// Get id of current scroll item
					   var cur = scrollItems.map(function(){
						 if ($(this).offset().top < fromTop)
						   return this;
					   });
					   // Get the id of the current element
					   cur = cur[cur.length-1];
					   var id = cur && cur.length ? cur[0].id : "";

					   if (lastId !== id) {
						   lastId = id;
						   // Set/remove active class
						   menuItems
							 .parent().removeClass("active")
							 .end().filter("[href='#"+id+"']").parent().addClass("active");
					   }                   
					});
				}
            } // CLOSE INIT FUNCTION
        };
    }();
  
 
    $(function() {
        SDB.App.init();
      
    });
}(jQuery));