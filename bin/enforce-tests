#!/bin/bash
# Wrapper to enforce test validation for any command

source bin/test-validate

# Pre-validation
validate_before_work

# Run the actual command
"$@"
EXIT_CODE=$?

# Post-validation if command succeeded
if [ $EXIT_CODE -eq 0 ]; then
  validate_and_rollback
fi

exit $EXIT_CODE