#!/usr/bin/env bash
# Simple Hugo build script

set -euo pipefail

# Default settings
OUTPUT_DIR="_dest/public-dev"
ENVIRONMENT="development"

# Parse simple options
while [[ $# -gt 0 ]]; do
    case $1 in
        -o) OUTPUT_DIR="$2"; shift 2 ;;
        -e) ENVIRONMENT="$2"; shift 2 ;;
        -c) rm -rf "$OUTPUT_DIR" resources/_gen .hugo_build.lock; shift ;;
        -h) echo "Usage: $0 [-o output_dir] [-e environment] [-c clean]"; exit 0 ;;
        *) echo "Unknown option: $1"; exit 1 ;;
    esac
done

echo "Building Hugo site..."
echo "Environment: $ENVIRONMENT"
echo "Output: $OUTPUT_DIR"

hugo build --environment "$ENVIRONMENT" --destination "$OUTPUT_DIR" --cleanDestinationDir

echo "âœ“ Build complete"